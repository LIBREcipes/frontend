<form [formGroup]="ingredientForm" (ngSubmit)="onSubmit()">
  <app-form-error [action]="errorType"></app-form-error>
  <div
    class="message"
    formArrayName="ingredients"
    *ngFor="let control of ingredients.controls; let i = index"
  >
    <div class="message-header">
      <p>Ingredient {{ i + 1 }}</p>
      <button
        class="delete"
        aria-label="delete"
        (click)="removeForm(i)"
      ></button>
    </div>
    <div class="message-body" [formGroupName]="i">
      <input type="hidden" formControlName="id" />
      <div class="field is-horizontal">
        <div class="field-label">
          <label class="label">Ingredient</label>
        </div>
        <div class="field-body">
          <div class="field">
            <div class="control">
              <app-autocomplete-ingredient
                formControlName="ingredient_uuid"
              ></app-autocomplete-ingredient>
            </div>
          </div>
        </div>
      </div>
      <div class="field is-horizontal">
        <div class="field-label">
          <label class="label">Amount</label>
        </div>
        <div class="field-body">
          <div class="field">
            <div class="control">
              <input class="input" type="number" formControlName="amount" />
            </div>
          </div>
          <div class="field">
            <div class="control">
              <input class="input" type="text" formControlName="unit" />
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="field is-grouped">
    <div class="control">
      <button
        class="button is-primary"
        type="submit"
        [disabled]="!ingredientForm.valid"
      >
        Save
      </button>
    </div>
    <div class="control">
      <button class="button is-outlined" type="button" (click)="addForm()">
        <span class="icon"><i class="fa fa-plus"></i></span>
        <span>Add Ingredient</span>
      </button>
    </div>
  </div>
</form>
